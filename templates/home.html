{% extends "base.html" %}

{% block title %}Tableau de Bord - Station MÃ©tÃ©o{% endblock %}

{% block content %}
    <!-- La page se rafraÃ®chira toutes les 60 secondes -->
    <meta http-equiv="refresh" content="60">

    <div class="card">
        <h1>ğŸ“¡ Station mÃ©tÃ©o</h1>
        <div class="current-reading">
            <h2>RelevÃ©s actuels</h2>
            <p>ğŸŒ¡ {{ temp }} Â°C &nbsp;&nbsp;&nbsp; ğŸ’§ {{ hum }} %</p>
            <p>ğŸ“ˆ {{ pressure }} hPa &nbsp;&nbsp;&nbsp; ğŸ’¨ {{ wind }} km/h ({{ wind_dir }})</p>
            <p>ğŸŒ§ï¸ {{ rain }} mm (cumul 24h)</p>
            <p class="last-update">DerniÃ¨re mise Ã  jour le {{ last_update }}</p>
            {% if temp_hum_summary %}
            <div class="trend-summary">
                <p>{{ temp_hum_summary }}</p>
            </div>
            {% endif %}
        </div>
    </div>

    {% if prediction %}
    <div class="card prediction">
        <h2>PrÃ©vision locale</h2>
        <p style="font-size: 1.2em; font-weight: normal;">{{ prediction }}</p>
    </div>
    {% endif %}

    <div class="card rain-summary">
        <h2>ğŸ’§ ActivitÃ© PluviomÃ©trique RÃ©cente</h2>
        <p>{{ rain_summary | safe }}</p>
    </div>

    <div class="card stats-container">
        <h2>ğŸ“Š Statistiques des tempÃ©ratures</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>PÃ©riode</th>
                    <th>Min (Â°C)</th>
                    <th>Max (Â°C)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Aujourd'hui</td><td>{{ stats.day[0] }}</td><td>{{ stats.day[1] }}</td>
                </tr>
                <tr>
                    <td>Cette semaine</td><td>{{ stats.week[0] }}</td><td>{{ stats.week[1] }}</td>
                </tr>
                <tr>
                    <td>Ce mois</td><td>{{ stats.month[0] }}</td><td>{{ stats.month[1] }}</td>
                </tr>
            </tbody>
        </table>
        {% if stats_graph_html %}
        <div class="graph-container" style="margin-top: 1em;">
            <img src="{{ stats_graph_html }}" alt="Graphique des statistiques de tempÃ©rature Min/Max">
        </div>
        {% endif %}
    </div>
{% endblock %}