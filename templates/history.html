{% extends "base.html" %}

{% block title %}Historique - Station Météo{% endblock %}

{% block content %}
<div class="card">
    <h2>Historique complet des données</h2>
    <p>Consultez l'ensemble des mesures enregistrées par la station.</p>

    {# Formulaire de filtrage par date #}
    <form method="GET" action="{{ url_for('history') }}" class="filter-form">
        <div class="form-group">
            <label for="start_date">Du :</label>
            <input type="date" id="start_date" name="start_date" value="{{ start_date or '' }}">
        </div>
        <div class="form-group">
            <label for="end_date">Au :</label>
            <input type="date" id="end_date" name="end_date" value="{{ end_date or '' }}">
        </div>
        <button type="submit" class="btn">Filtrer</button>
        <a href="{{ url_for('history') }}" class="btn btn-secondary">Réinitialiser</a>
    </form>

    <div class="table-container">
        {{ table_html | safe }}
    </div>

    {# Section de pagination #}
    <div class="pagination">
        {# Lien vers la page précédente #}
        {% if current_page > 1 %}
            <a href="{{ url_for('history', page=current_page - 1, start_date=start_date, end_date=end_date) }}" class="btn">&laquo; Précédent</a>
        {% endif %}

        <span class="page-info">Page {{ current_page }} sur {{ total_pages }}</span>

        {# Lien vers la page suivante #}
        {% if current_page < total_pages %}
            <a href="{{ url_for('history', page=current_page + 1, start_date=start_date, end_date=end_date) }}" class="btn">Suivant &raquo;</a>
        {% endif %}
    </div>
</div>
{% endblock %}